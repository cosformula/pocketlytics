---
title: Laravel
description: Integrate Pocketlytics Analytics with your Laravel application using Blade templates
---

import { Steps, Step } from 'fumadocs-ui/components/steps';

Integrating Pocketlytics Analytics with your Laravel application is straightforward. You'll typically add the Pocketlytics tracking script to your main Blade layout file.

<Steps>
<Step>
### Get Your Tracking Script

First, you'll need your Pocketlytics tracking script. You can find this in your Pocketlytics dashboard under **Site Settings > Tracking Code**. It will look something like this:

```html
<script async defer src="https://app.pocketlytics.local/api/script.js" data-site-id="YOUR_SITE_ID"></script>
```

Replace `YOUR_SITE_ID` with your actual Site ID from your Pocketlytics dashboard.
</Step>

<Step>
### Locate Your Main Blade Layout File

In a standard Laravel application, you'll have a main layout file that other Blade views extend. This file is often located at:

- `resources/views/layouts/app.blade.php` (common for applications using Laravel's authentication scaffolding)
- Or `resources/views/layouts/main.blade.php` or a similar custom name.
- If you're using Laravel Jetstream or Breeze, the main layout file might be in a slightly different location within `resources/views/`.

Identify the primary layout file that wraps most or all of your site's pages.
</Step>

<Step>
### Add the Tracking Script to the Layout

Open your main Blade layout file. Paste the Pocketlytics tracking script just before the closing `</body>` tag.

```php
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ config('app.name', 'Laravel') }}</title>
    {{-- Stylesheets, etc. --}}
    @vite(['resources/css/app.css', 'resources/js/app.js']) {{-- Example for Vite --}}
</head>
<body class="font-sans antialiased">
    {{-- Your page content, often using @yield or <slot> --}}
    @yield('content') 

    {{-- Other scripts --}}

    {{-- Pocketlytics Analytics Script --}}
    @if(app()->environment('production'))
        <script async defer src="{{ config('services.pocketlytics.instance_url', 'https://app.pocketlytics.local') }}/api/script.js" data-site-id="{{ config('services.pocketlytics.site_id') }}"></script>
    @endif
</body>
</html>
```

**Explanation:**
- `@if(app()->environment('production'))`: This Blade directive ensures the script is only included when your Laravel application is running in the `production` environment. This prevents tracking during local development.
- `{{ config('services.pocketlytics.instance_url', 'https://app.pocketlytics.local') }}/api/script.js` and `{{ config('services.pocketlytics.site_id') }}`: This is a recommended way to manage your Pocketlytics credentials using Laravel's configuration system. The `config('services.pocketlytics.instance_url')` should resolve to your Pocketlytics instance's base URL (e.g., `https://app.pocketlytics.local` or your self-hosted URL), and `/api/script.js` is appended to it. The fallback shown ensures it defaults to the cloud-hosted Pocketlytics script. See step 4 for `.env` configuration.

If you prefer not to use the config helper immediately, you can hardcode the values:
```php
    {{-- Pocketlytics Analytics Script --}}
    @if(app()->environment('production'))
        <script async defer src="https://app.pocketlytics.local/api/script.js" data-site-id="YOUR_SITE_ID"></script>
    @endif
```
Remember to replace placeholders with your actual script URL and Site ID.
</Step>

<Step>
### Configure Environment Variables (Recommended)

It's best practice to store your Pocketlytics Site ID and instance URL in your `.env` file and access them via Laravel's configuration.

**a. Add to `.env` file:**
Open your `.env` file and add:

```bash
POCKETLYTICS_INSTANCE_URL=https://app.pocketlytics.local
POCKETLYTICS_SITE_ID=YOUR_SITE_ID
```

**b. Add to `config/services.php`:**
Open (or create if it doesn't exist) `config/services.php` and add a configuration for Pocketlytics:

```php
<?php

return [
    // ... other services

    'pocketlytics' => [
        'instance_url' => env('POCKETLYTICS_INSTANCE_URL'),
        'site_id' => env('POCKETLYTICS_SITE_ID'),
    ],
];
```
Now, the Blade template code from Step 3 using `config('services.pocketlytics.instance_url')` and `config('services.pocketlytics.site_id')` will work correctly.

Make sure to run `php artisan config:clear` if you've cached your configuration.
</Step>

<Step>
### Verify Integration

- Deploy your Laravel application to your production environment (or set `APP_ENV=production` locally for testing, but be mindful of tracking local data).
- Open your live Laravel website in a browser.
- Navigate through a few pages.
- Check your Pocketlytics dashboard for incoming data. It might take a few minutes for the first events to appear.
</Step>
</Steps>

That's it! Pocketlytics Analytics is now integrated with your Laravel application and will only track visits in your production environment.